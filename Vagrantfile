# -*- mode: ruby -*-
# vi: set ft=ruby :
Vagrant.configure("2") do |config|


  config.vm.define "kali" do |kali|
    kali.vm.box = "Sliim/kali-2016.2-light-amd64"
    kali.vm.hostname = 'kali'
    kali.vm.box_url = "Sliim/kali-2016.2-light-amd64"
    kali.vm.provision :shell, :path => "provisioning/provision_debian.sh", privileged: false
    kali.vm.network :private_network, ip: "10.0.0.2"
    kali.vm.network :forwarded_port, guest: 22, host: 2229, id: "ssh", auto_correct: true
    kali.vm.provider :virtualbox do |v|
      v.customize ["modifyvm", :id, "--natdnshostresolver1", "on"]
      v.customize ["modifyvm", :id, "--memory", 2048]
      v.customize ["modifyvm", :id, "--name", "kali_vagrant"]
    end
  end

  config.vm.define "ubuntu" do |ubuntu|
    ubuntu.vm.box = "ubuntu/trusty32"
    ubuntu.vm.hostname = 'ubuntu'
    ubuntu.vm.box_url = "ubuntu/trusty32"
    ubuntu.vm.provision :shell, :path => "provisioning/provision_debian.sh", privileged: false
    ubuntu.vm.network :private_network, ip: "10.0.0.3"
    ubuntu.vm.network :forwarded_port, guest: 22, host: 2223, id: "ssh", auto_correct: true
    ubuntu.vm.provider :virtualbox do |v|
      v.customize ["modifyvm", :id, "--natdnshostresolver1", "on"]
      v.customize ["modifyvm", :id, "--memory", 256]
      v.customize ["modifyvm", :id, "--name", "ubuntu"]
    end


   end

  config.vm.define "ubuntu64" do |ubuntu|
    ubuntu.vm.box = "ubuntu/trusty64"
    ubuntu.vm.hostname = 'ubuntu64'
    ubuntu.vm.box_url = "ubuntu/trusty64"
    ubuntu.vm.provision :shell, :path => "provisioning/provision_debian.sh", privileged: false
    ubuntu.vm.network :private_network, ip: "10.0.0.4"
    ubuntu.vm.network :forwarded_port, guest: 22, host: 2224, auto_correct: true
    ubuntu.vm.provider :virtualbox do |v|
      v.customize ["modifyvm", :id, "--natdnshostresolver1", "on"]
      v.customize ["modifyvm", :id, "--memory", 256]
      v.customize ["modifyvm", :id, "--name", "ubuntu64"]
    end
  end

  config.vm.define "win7" do |win10|
    win10.vm.box = "win7_vagrant"
    win10.vm.hostname = 'win7vagrant'
    win10.vm.communicator = "winrm"
    win10.vm.box_url = "boxes/windows7_vagrant"
    
    win10.vm.network :private_network, ip: "10.0.0.10"
    #config.vm.network :forwarded_port, guest: 22, host: 2221
    #config.ssh.forward_agent = true
    win10.vm.network :forwarded_port, guest: 3389, host: 3379, id: "rdp", auto_correct: false
    win10.vm.network :forwarded_port, guest: 5985, host: 5987, id: "winrm", auto_correct: true
    win10.windows.set_work_network = true
    win10.winrm.max_tries = 10
    win10.winrm.username = "malboxes"
    win10.winrm.password = "malboxes"
    win10.vm.provision :shell, :path => "provisioning/InstallChocolatey.ps1", :upload_path => "C:\\tmp\\script_1.ps1", privileged: true
    win10.vm.provision :shell, :path => "provisioning/enable_rdp.ps1", :upload_path => "C:\\tmp\\script_2.ps1", privileged: true
    win10.vm.provision :shell, :path => "provisioning/choc_install.bat", :upload_path => "C:\\tmp\\script_3.bat", privileged: true

    win10.vm.provider :virtualbox do |v|
      v.gui = false
      v.customize ["modifyvm", :id, "--natdnshostresolver1", "on"]
      v.customize ["modifyvm", :id, "--memory", 512]
      v.customize ["modifyvm", :id, "--name", "win7_vagrant"]
      v.customize ["modifyvm", :id, "--vram", "32"]
      v.customize ["modifyvm", :id, "--clipboard", "bidirectional"]
    end

   

  end

  
  config.vm.define "win10" do |win10|
    win10.vm.box = "win10_vagrant"
    win10.vm.hostname = 'win10vagrant'
    win10.vm.communicator = "winrm"
    win10.vm.box_url = "boxes/win10_vagrant"
    #http://aka.ms/vagrant-win7-ie11

    #win7ie10.vm.network :private_network, ip: "10.0.0.11"
    win10.vm.network :private_network, ip: "10.0.0.11"
    #config.vm.network :forwarded_port, guest: 22, host: 2221
    #config.ssh.forward_agent = true
    win10.vm.network :forwarded_port, guest: 3389, host: 3378, id: "rdp", auto_correct: false
    win10.vm.network :forwarded_port, guest: 5985, host: 5986, id: "winrm", auto_correct: true
    win10.windows.set_work_network = true
    win10.winrm.max_tries = 10
    win10.winrm.username = "malboxes"
    win10.winrm.password = "malboxes"
    win10.vm.provision :shell, :path => "provisioning/InstallChocolatey.ps1", :upload_path => "C:\\tmp\\script_1.ps1", privileged: true
    win10.vm.provision :shell, :path => "provisioning/enable_rdp.ps1", :upload_path => "C:\\tmp\\script_2.ps1", privileged: true
    win10.vm.provision :shell, :path => "provisioning/choc_install.bat", :upload_path => "C:\\tmp\\script_3.bat", privileged: true

    win10.vm.provider :virtualbox do |v|
      v.gui = false
      v.customize ["modifyvm", :id, "--natdnshostresolver1", "on"]
      v.customize ["modifyvm", :id, "--memory", 512]
      v.customize ["modifyvm", :id, "--name", "win10_vagrant"]
      v.customize ["modifyvm", :id, "--vram", "128"]
      v.customize ["modifyvm", :id, "--clipboard", "bidirectional"]
    end

   

  end

  
end


